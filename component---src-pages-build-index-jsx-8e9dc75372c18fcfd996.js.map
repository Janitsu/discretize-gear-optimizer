{"version":3,"file":"component---src-pages-build-index-jsx-8e9dc75372c18fcfd996.js","mappings":"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","sources":["webpack://discretize-gear-optimizer/./src/components/BuildPage.jsx","webpack://discretize-gear-optimizer/./src/pages/build/index.jsx","webpack://discretize-gear-optimizer/./src/components/url-state/schema|lazy|/^\\.\\/BuildPageSchema_v.*$/|groupOptions: {}|namespace object"],"sourcesContent":["import { TraitLine } from '@discretize/gw2-ui-new';\nimport { decompress } from '@discretize/object-compression';\nimport { TextDivider } from '@discretize/react-discretize-components';\nimport { Box, Paper, Typography } from '@mui/material';\nimport * as React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { makeStyles } from 'tss-react/mui';\nimport { NumberParam, StringParam, useQueryParam } from 'use-query-params';\nimport { buffModifiers, classModifiers } from '../assets/modifierdata';\nimport {\n  changeBuildPage,\n  getBuffs,\n  getCharacter,\n  getSkills,\n  getTraits,\n  getWeapons,\n} from '../state/slices/buildPage';\nimport ResultCharacter from './sections/results/ResultCharacter';\n\nconst useStyles = makeStyles()((theme) => ({\n  traitlineText: {\n    textOrientation: 'mixed',\n    fontWeight: 250,\n    textAlign: 'end',\n    overflowWrap: 'break-word',\n  },\n  traitlineRoot: {\n    padding: theme.spacing(1),\n    borderTopStyle: 'solid',\n    borderColor: theme.palette.primary.main,\n    position: 'absolute',\n    zIndex: 9999,\n    maxHeight: 133,\n  },\n  gw2component: {\n    fontSize: 20,\n  },\n}));\n\nconst BuildPage = ({ data }) => {\n  const { classes } = useStyles();\n  const dispatch = useDispatch();\n\n  // selectors from buildPage slice, will be loaded from url\n  const character = useSelector(getCharacter);\n  const weapons = useSelector(getWeapons);\n  const skills = useSelector(getSkills);\n  const { lines, selected } = useSelector(getTraits);\n  const buffs = useSelector(getBuffs);\n\n  const [buildUrl] = useQueryParam('data', StringParam);\n  const [versionParam] = useQueryParam('v', NumberParam);\n\n  // if no version is present, default to version 0\n  const version = versionParam || 0;\n\n  React.useEffect(() => {\n    if (!buildUrl) {\n      console.error('No url parameter supplied');\n      return;\n    }\n\n    // load build state from url\n    import(`./url-state/schema/BuildPageSchema_v${version}`).then(({ BuildPageSchema: schema }) =>\n      decompress({\n        string: buildUrl,\n        schema,\n        onSuccess: (result) => dispatch(changeBuildPage(result)),\n      }),\n    );\n\n    return () => {};\n  }, [buildUrl, dispatch, version]);\n\n  // lookup table for specialization id -> trait line name\n  const traitLookup = [];\n  []\n    .concat(...Object.values(classModifiers))\n    .filter((item) => item.section !== 'Skills')\n    .forEach((traitLine) => {\n      traitLookup[traitLine.id] = traitLine.section;\n    });\n\n  // Component for a trait line, augmented with the name of the trait line\n  // TODO maybe move this into react-discretize-components\n  const Traits = ({ id, selected: selectedTraits }) => {\n    return (\n      <Box display=\"flex\" mb={1}>\n        <Paper elevation={0} className={classes.traitlineRoot}>\n          <Typography variant=\"body1\" className={classes.traitlineText}>\n            {traitLookup[id]}\n          </Typography>\n        </Paper>\n        <TraitLine id={id} defaultSelected={selectedTraits} selectable={false} />\n      </Box>\n    );\n  };\n\n  const assumedBuffs = buffModifiers.flatMap((buff) => buff.items).filter((buff) => buffs[buff.id]);\n\n  return (\n    <>\n      <TextDivider text=\"Equipment\" />\n\n      {character && (\n        <ResultCharacter\n          data={data}\n          character={character}\n          weapons={weapons}\n          skills={skills}\n          assumedBuffs={assumedBuffs}\n        />\n      )}\n\n      <TextDivider text=\"Traits\" />\n      {lines[0] && <Traits id={parseInt(lines[0], 10)} selected={selected[0]} />}\n      {lines[1] && <Traits id={parseInt(lines[1], 10)} selected={selected[1]} />}\n      {lines[2] && <Traits id={parseInt(lines[2], 10)} selected={selected[2]} />}\n    </>\n  );\n};\n\nexport default BuildPage;\n","import { APILanguageProvider } from '@discretize/gw2-ui-new';\nimport { Layout } from '@discretize/react-discretize-components';\nimport { Typography } from '@mui/material';\nimport { graphql } from 'gatsby';\nimport { Trans, useI18next } from 'gatsby-plugin-react-i18next';\nimport * as React from 'react';\nimport ErrorBoundary from '../../components/baseComponents/ErrorBoundary';\nimport LanguageSelection from '../../components/baseComponents/LanguageSelection';\nimport BuildPage from '../../components/BuildPage';\n\nconst IndexPage = ({ location, data }) => {\n  const { language } = useI18next();\n\n  return (\n    <APILanguageProvider value={language}>\n      <Layout>\n        <LanguageSelection location={location} />\n        <Typography variant=\"h3\" sx={{ paddingBottom: 2 }}>\n          <Trans>Shared Build</Trans>\n        </Typography>\n\n        <ErrorBoundary location=\"BuildPage\">\n          <BuildPage data={data} />\n        </ErrorBoundary>\n      </Layout>\n    </APILanguageProvider>\n  );\n};\nexport const query = graphql`\n  query ($language: String!) {\n    locales: allLocale(filter: { language: { eq: $language } }) {\n      edges {\n        node {\n          ns\n          data\n          language\n        }\n      }\n    }\n\n    images: allImageSharp {\n      edges {\n        node {\n          gatsbyImageData\n          original {\n            src\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default IndexPage;\n","var map = {\n\t\"./BuildPageSchema_v0\": [\n\t\t72402,\n\t\t402\n\t],\n\t\"./BuildPageSchema_v0.js\": [\n\t\t72402,\n\t\t402\n\t],\n\t\"./BuildPageSchema_v1\": [\n\t\t58484,\n\t\t484\n\t],\n\t\"./BuildPageSchema_v1.js\": [\n\t\t58484,\n\t\t484\n\t],\n\t\"./BuildPageSchema_v2\": [\n\t\t31388,\n\t\t388\n\t],\n\t\"./BuildPageSchema_v2.js\": [\n\t\t31388,\n\t\t388\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 99696;\nmodule.exports = webpackAsyncContext;"],"names":["useStyles","makeStyles","theme","traitlineText","textOrientation","fontWeight","textAlign","overflowWrap","traitlineRoot","padding","spacing","borderTopStyle","borderColor","palette","primary","main","position","zIndex","maxHeight","gw2component","fontSize","data","classes","dispatch","useDispatch","character","useSelector","getCharacter","weapons","getWeapons","skills","getSkills","lines","selected","getTraits","buffs","getBuffs","buildUrl","useQueryParam","StringParam","versionParam","NumberParam","version","React","then","BuildPageSchema","schema","decompress","string","onSuccess","result","changeBuildPage","console","error","traitLookup","concat","Object","values","classModifiers","filter","item","section","forEach","traitLine","id","Traits","selectedTraits","Box","display","mb","Paper","elevation","className","Typography","variant","defaultSelected","selectable","assumedBuffs","buffModifiers","buff","items","text","ResultCharacter","parseInt","location","language","useI18next","value","LanguageSelection","sx","paddingBottom","Trans","ErrorBoundary","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","e","Error","code","ids","keys","module","exports"],"sourceRoot":""}